<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script src="http://maps.google.com/maps?file=api&v=2"></script>
        <script type="text/javascript">
        
        function fnPageLoaded()
        {
			// map
            var map = new GMap2(document.getElementById("map"));
            map.addControl(new GMapTypeControl());
            map.addControl(new GLargeMapControl());
			
			var vyTuyen = 10.7991832004115;
			var kinhTuyen = 106.6802716255188;
			var doPhong = 16;
            var khoiDiem = new GLatLng(vyTuyen, kinhTuyen);
			map.setCenter(khoiDiem, doPhong);
			
            // draggable marker
            var marker = new GMarker(khoiDiem, {draggable: true}); 
            map.addOverlay(marker);
            marker.enableDragging();
			
            // event for marker
            GEvent.addListener(marker, "drag", function(){
                fnUpdateMapInfo();
            });
            
            // event for map
            GEvent.addListener(map, "click", function(overlay, latlng) {     
                if (latlng) { 
                    marker.setPoint(latlng);
                    fnUpdateMapInfo();
                }
            });
            GEvent.addListener(map,"zoomend", function(oldLevel, newLeval) {     
                if (oldLevel != newLeval) { 
                    fnUpdateMapInfo();
                }
            });
			
			function fnUpdateMapInfo(){
				document.getElementById("kinhTuyen").value = marker.getPoint().lng();
				document.getElementById("vyTuyen").value = marker.getPoint().lat();
				document.getElementById("doPhong").value = map.getZoom();
			}
        }
        </script>
    </head>
<body onload="fnPageLoaded()">
<form name="frmcty" id="frmcty">
	Kinh tuyến: <input name="kinhTuyen" type="text" id="kinhTuyen" size="20" />
	Vỹ tuyến: <input name="vyTuyen" type="text" id="vyTuyen" size="20" />
	Độ phóng: <input name="doPhong" type="text" id="doPhong" size="5" />
	
	<div id="map" style="width:100%; height:400px"></div>
  
</form>
    </body>
</html>
